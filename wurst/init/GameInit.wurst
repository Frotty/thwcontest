package GameInit
import MapStuff
import Spawner
import ClosureTimers
import Entity
import WaveManager
import Waves
import StunHandler
import Technician
import Crusader
import Mage
import Specialist
import Mammoth
import OrderStringFactory
import Picking
import CollisionDetection
import Shield
import GameConstants
import Intermission
import CustomExp
import Items
import SimpleAi
import Vampire

function initResources(boolean compileTime)
	init_Players(compileTime)
	init_MageHero(compileTime)
	init_Crusader(compileTime)
	init_Technician(compileTime)
	init_Specialist(compileTime)
	init_Picking(compileTime)
	init_Spawner(compileTime)
	print(">>>>>>>>>>1")
	init_Waves(compileTime)
	print(">>>>>>>>>>2")
	init_Intermission(compileTime)
	print(">>>>>>>>>>3")
	print(">>>>>>>>>>4")
	init_StunHandler(compileTime)
	print(">>>>>>>>>>5")
	init_Mammoth(compileTime)
	print(">>>>>>>>>>6")
	init_CollisionDetection(compileTime, 16, 256)
	print(">>>>>>>>>>7")
	init_Intermission(compileTime)
	print(">>>>>>>>>>8")
	init_AI(compileTime)
	print(">>>>>>>>>>9")
	init_VampireBoss(compileTime)
	if not compileTime
		nullTimer(() -> init_Items(compileTime))
	
	print(">>>>>>>>>>10")


boolean testing = true
	
init
	doAfter(0.01, () -> begin
		initResources(false)
		if testing
			let h = new Technician(vec3(0,300,800),Player(0) )  
			let s = new Specialist(vec3(0,100,800),Player(1) ) // Fortesting

			SetHeroLevel(h.actor, 4, false)
			SetHeroLevel(s.actor, 4, false)
			startIntermission(10, "You have 20 seconds till the first attack..")
			
		else
			//Welcome message
			print("Welcome to [Enter appealing name here]!")
			print("Your only hope against the rageing hordes of Zombies is the mighty statue of Clarity.")
			print("It will protect you from turning into one of those monsters, if you stay nearby.")
			print("However it can only heal wounds once every minute, and your soul cannot be saved if every human is dead.")
			print("Chose your champion wisely to endure this greatest challenge in life.")
			
			print("playerNumber = " + playerNumber.toString())
			createPickabes()
			doAfter(0.0, ()->testPicking())
				
		startEntityLoop()
	end)
	
@compiletime function generateObjects()
	initResources(true)